{"version":3,"sources":["scripts/main.js"],"names":["allTr","document","querySelectorAll","allTdFromPage","startButton","querySelector","table","score","random","res","Math","creator","content","needTd","needTr","floor","classList","contains","style","display","add","textContent","loseMoment","lose","start","addEventListener","moveToLeft","moveToRight","moveToUp","moveToDown","forEach","a","className","remove","fontSize","finish","removeEventListener","allPlayTd","length","i","tdOnNeedTr","closest","children","index","indexOf","b","c","d","e","key","movingTd","count","sum","array","indexFirst","arrayForFunction","n","push"],"mappings":";AAAA,aA+XA,SAAA,EAAA,GAAA,OAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,IAAA,SAAA,IAAA,MAAA,IAAA,UAAA,wIAAA,SAAA,EAAA,EAAA,GAAA,GAAA,EAAA,CAAA,GAAA,iBAAA,EAAA,OAAA,EAAA,EAAA,GAAA,IAAA,EAAA,OAAA,UAAA,SAAA,KAAA,GAAA,MAAA,GAAA,GAAA,MAAA,WAAA,GAAA,EAAA,cAAA,EAAA,EAAA,YAAA,MAAA,QAAA,GAAA,QAAA,EAAA,MAAA,KAAA,GAAA,cAAA,GAAA,2CAAA,KAAA,GAAA,EAAA,EAAA,QAAA,GAAA,SAAA,EAAA,GAAA,GAAA,oBAAA,QAAA,OAAA,YAAA,OAAA,GAAA,OAAA,MAAA,KAAA,GAAA,SAAA,EAAA,GAAA,GAAA,MAAA,QAAA,GAAA,OAAA,EAAA,GAAA,SAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,UAAA,EAAA,EAAA,QAAA,IAAA,IAAA,EAAA,EAAA,EAAA,IAAA,MAAA,GAAA,EAAA,EAAA,IAAA,EAAA,GAAA,EAAA,GAAA,OAAA,EA7XA,IAAMA,EAAYC,EAAAA,SAASC,iBAAiB,OACtCC,EAAoBF,EAAAA,SAASC,iBAAiB,OAC9CE,EAAcH,SAASI,cAAc,UACrCC,EAAQL,SAASI,cAAc,eAC/BE,EAAQN,SAASI,cAAc,eAE/BG,EAAS,WAUNC,OATGC,KAAKF,SAGP,GACA,EAEA,GAMJG,EAAU,SAAVA,IACEC,IAAAA,EAAUJ,IAIVK,EADYC,EADHd,EAAMU,KAAKK,MAAsB,EAAhBL,KAAKF,WACZN,iBAAiB,OACrBQ,KAAKK,MAAsB,EAAhBL,KAAKF,WAEjCK,GAAAA,EAAOG,UAAUC,SAAS,QACrBN,OAAAA,IAGTL,EAAMY,MAAMC,QAAU,QAEtBN,EAAOG,UAAUI,IAAI,QACrBP,EAAOG,UAAUI,IAAmBR,eAAAA,OAAAA,IACpCC,EAAOQ,YAAcT,EAEjBU,KACFC,KAIEC,EAAQ,WACZvB,SAASwB,iBAAiB,QAASC,GACnCzB,SAASwB,iBAAiB,QAASE,GACnC1B,SAASwB,iBAAiB,QAASG,GACnC3B,SAASwB,iBAAiB,QAASI,GAEnCtB,EAAMc,YAAc,IAEpBlB,EAAc2B,QAAQ,SAAAC,GACpBA,EAAEC,UAAY,eAGhB7B,EAAc2B,QAAQ,SAAAC,GACpBA,EAAEV,YAAc,KAGlBpB,SAASI,cAAc,YAAYgB,YAAc,6BACjDpB,SAASI,cAAc,YAAYW,UAAUiB,OAAO,gBACpDhC,SAASI,cAAc,YAAYW,UAAUiB,OAAO,eACpD7B,EAAYiB,YAAc,UAC1BjB,EAAYY,UAAUI,IAAI,WAC1BhB,EAAYc,MAAMgB,SAAW,OAC7BvB,IACAA,KAGIwB,EAAS,WACblC,SAASI,cAAc,YAAYgB,YAC/B,2CAEJpB,SAASI,cAAc,YAAYW,UAAUI,IAAI,eACjDhB,EAAYiB,YAAc,QAC1BjB,EAAYc,MAAMgB,SAAW,OAC7B9B,EAAY4B,UAAY,eACxB/B,SAASmC,oBAAoB,QAASV,GACtCzB,SAASmC,oBAAoB,QAAST,GACtC1B,SAASmC,oBAAoB,QAASR,GACtC3B,SAASmC,oBAAoB,QAASP,IAGlCN,EAAO,WACXtB,SAASI,cAAc,YAAYgB,YAC/B,qCACJpB,SAASI,cAAc,YAAYW,UAAUI,IAAI,gBACjDhB,EAAYiB,YAAc,QAC1BjB,EAAYc,MAAMgB,SAAW,OAC7B9B,EAAY4B,UAAY,eACxB/B,SAASmC,oBAAoB,QAASV,GACtCzB,SAASmC,oBAAoB,QAAST,GACtC1B,SAASmC,oBAAoB,QAASR,GACtC3B,SAASmC,oBAAoB,QAASP,IAGlCP,EAAa,WAGbe,GAFkBpC,EAAAA,SAASC,iBAAiB,UAElCoC,OAAS,GACd,OAAA,EAGJ,IAAA,IAAIC,EAAI,EAAGA,EAAIpC,EAAcmC,OAAQC,IAAK,CACvCzB,IACA0B,EAAiB1B,EADRX,EAAcoC,GAAGE,QAAQ,MACVC,UACxBC,EAAQH,EAAWI,QAAQzC,EAAcoC,IAC3CR,EAAI,GACJc,EAAI,GACJC,EAAI,GACJC,EAAI,GAkBJ5C,GAhBAqC,EAAWG,EAAQ,KACrBZ,EAAIS,EAAWG,EAAQ,GAAGtB,aAGxBlB,EAAcoC,EAAI,KACpBM,EAAI1C,EAAcoC,EAAI,GAAGlB,aAGvBmB,EAAWG,EAAQ,KACrBG,EAAIN,EAAWG,EAAQ,GAAGtB,aAGxBlB,EAAcoC,EAAI,KACpBQ,EAAI5C,EAAcoC,EAAI,GAAGlB,aAGvBlB,EAAcoC,GAAGlB,cAAgBU,EAC5B,OAAA,EAGL5B,GAAAA,EAAcoC,GAAGlB,cAAgBwB,EAC5B,OAAA,EAGL1C,GAAAA,EAAcoC,GAAGlB,cAAgByB,EAC5B,OAAA,EAGL3C,GAAAA,EAAcoC,GAAGlB,cAAgB0B,EAC5B,OAAA,EAIJ,OAAA,GAGHrB,EAAa,SAASsB,GACtBA,GAAU,cAAVA,EAAEC,KAAiC,MAAVD,EAAEC,IAAa,CAKrC,IAJCC,IAAAA,EAAejD,EAAAA,SAASC,iBAAiB,UAC3CiD,EAAQ,EACRC,EAAM,EAEDb,EAAI,EAAGA,EAAIW,EAASZ,OAAQC,IAM5B,IALDc,IAAAA,EAAYH,EAAAA,EAASX,GAAGE,QAAQ,MAAMC,UACxCC,EAAQU,EAAMT,QAAQM,EAASX,IAC7BR,EAAImB,EAASX,GAAGP,UAChBa,EAAIK,EAASX,GAAGlB,cAGhBsB,EAAQ,EAAI,MAIZU,EAAMV,EAAQ,GAAG3B,UAAUC,SAAS,SAClCoC,EAAMV,EAAQ,GAAG3B,UAAUC,SAAwB4B,eAAAA,OAAAA,MAN9C,CAUPQ,GAAAA,EAAMV,EAAQ,GAAG3B,UAAUC,SAAwB4B,eAAAA,OAAAA,IAAM,CAC3DQ,EAAMV,EAAQ,GAAGX,UAA2B,eAAA,OAAK,GAAJa,EAA7C,oBACAQ,EAAMV,EAAQ,GAAGtB,YAAiBwB,GAAAA,OAAI,EAAJA,GAClCO,IAAQC,EAAMV,EAAQ,GAAGtB,YACzBgC,EAAMV,GAAOX,UAAY,aACzBqB,EAAMV,GAAOtB,YAAc,GAC3B8B,IAEqC,SAAjCE,EAAMV,EAAQ,GAAGtB,aACnBc,IAGF,MAEFkB,EAAMV,EAAQ,GAAGX,UAAYD,EAC7BsB,EAAMV,EAAQ,GAAGtB,YAAcwB,EAC/BQ,EAAMV,GAAOX,UAAY,aACzBqB,EAAMV,GAAOtB,YAAc,GAC3BsB,IACAQ,IAIAA,EAAQ,GACVxC,IAGFJ,EAAMc,YAAiB,GAAA,QAACd,EAAMc,YAAc+B,KAI1CzB,EAAc,SAASqB,GACvBA,GAAU,eAAVA,EAAEC,KAAkC,MAAVD,EAAEC,IAAa,CAKtC,IAJCC,IAAAA,EAAejD,EAAAA,SAASC,iBAAiB,UAC3CiD,EAAQ,EACRC,EAAM,EAEDb,EAAIW,EAASZ,OAAS,EAAGC,GAAK,EAAGA,IAMjC,IALDc,IAAAA,EAAYH,EAAAA,EAASX,GAAGE,QAAQ,MAAMC,UACxCC,EAAQU,EAAMT,QAAQM,EAASX,IAC7BR,EAAImB,EAASX,GAAGP,UAChBa,EAAIK,EAASX,GAAGlB,cAGhBsB,EAAQ,EAAI,MAIZU,EAAMV,EAAQ,GAAG3B,UAAUC,SAAS,SAClCoC,EAAMV,EAAQ,GAAG3B,UAAUC,SAAwB4B,eAAAA,OAAAA,MAN9C,CAUPQ,GAAAA,EAAMV,EAAQ,GAAG3B,UAAUC,SAAwB4B,eAAAA,OAAAA,IAAM,CAC3DQ,EAAMV,EAAQ,GAAGX,UAA2B,eAAA,OAAK,GAAJa,EAA7C,oBACAQ,EAAMV,EAAQ,GAAGtB,YAAiBwB,GAAAA,OAAI,EAAJA,GAClCO,IAAQC,EAAMV,EAAQ,GAAGtB,YACzBgC,EAAMV,GAAOX,UAAY,aACzBqB,EAAMV,GAAOtB,YAAc,GAC3B8B,IAEqC,SAAjCE,EAAMV,EAAQ,GAAGtB,aACnBc,IAGF,MAGFkB,EAAMV,EAAQ,GAAGX,UAAYD,EAC7BsB,EAAMV,EAAQ,GAAGtB,YAAcwB,EAC/BQ,EAAMV,GAAOX,UAAY,aACzBqB,EAAMV,GAAOtB,YAAc,GAC3BsB,IACAQ,IAIAA,EAAQ,GACVxC,IAGFJ,EAAMc,YAAiB,GAAA,QAACd,EAAMc,YAAc+B,KAI1CxB,EAAW,SAASoB,GACpBA,GAAU,YAAVA,EAAEC,KAA+B,MAAVD,EAAEC,IAAa,CAKnC,IAJCC,IAAAA,EAAejD,EAAAA,SAASC,iBAAiB,UAC3CiD,EAAQ,EACRC,EAAM,EAEDb,EAAI,EAAGA,EAAIW,EAASZ,OAAQC,IAAK,CAKnC,IAJCc,IACAC,EADYJ,EAAAA,EAASX,GAAGE,QAAQ,MAAMC,UACnBE,QAAQM,EAASX,IACpCgB,EAAmB,GAEhBC,EAAI,EAAGA,EAAI,EAAGA,IACrBD,EAAiBE,KAAKzD,EAAMwD,GAAGd,SAASY,IAOnC,IAJDvB,IAAAA,EAAImB,EAASX,GAAGP,UAChBa,EAAIK,EAASX,GAAGlB,YAClBsB,EAAQY,EAAiBX,QAAQM,EAASX,MAGxCI,EAAQ,EAAI,MAIZY,EAAiBZ,EAAQ,GAAG3B,UAAUC,SAAS,SAC7CsC,EAAiBZ,EAAQ,GAAG3B,UAAUC,SACzB4B,eAAAA,OAAAA,MAPR,CAWPU,GAAAA,EAAiBZ,EAAQ,GAAG3B,UAAUC,SACzB4B,eAAAA,OAAAA,IAAM,CACrBU,EAAiBZ,EAAQ,GAAGX,UACT,eAAA,OAAK,GAAJa,EADpB,oBAEAU,EAAiBZ,EAAQ,GAAGtB,YAAiBwB,GAAAA,OAAI,EAAJA,GAC7CO,IAAQG,EAAiBZ,EAAQ,GAAGtB,YACpCkC,EAAiBZ,GAAOX,UAAY,aACpCuB,EAAiBZ,GAAOtB,YAAc,GACtC8B,IAEgD,SAA5CI,EAAiBZ,EAAQ,GAAGtB,aAC9Bc,IAGF,MAGFoB,EAAiBZ,EAAQ,GAAGX,UAAYD,EACxCwB,EAAiBZ,EAAQ,GAAGtB,YAAcwB,EAC1CU,EAAiBZ,GAAOX,UAAY,aACpCuB,EAAiBZ,GAAOtB,YAAc,GACtCsB,IACAQ,KAIAA,EAAQ,GACVxC,IAGFJ,EAAMc,YAAiB,GAAA,QAACd,EAAMc,YAAc+B,KAI1CvB,EAAa,SAASmB,GACtBA,GAAU,cAAVA,EAAEC,KAAiC,MAAVD,EAAEC,IAAa,CAKrC,IAJCC,IAAAA,EAAejD,EAAAA,SAASC,iBAAiB,UAC3CiD,EAAQ,EACRC,EAAM,EAEDb,EAAIW,EAASZ,OAAS,EAAGC,GAAK,EAAGA,IAAK,CAKxC,IAJCc,IACAC,EADYJ,EAAAA,EAASX,GAAGE,QAAQ,MAAMC,UACnBE,QAAQM,EAASX,IACpCgB,EAAmB,GAEhBC,EAAI,EAAGA,EAAI,EAAGA,IACrBD,EAAiBE,KAAKzD,EAAMwD,GAAGd,SAASY,IAOnC,IAJDvB,IAAAA,EAAImB,EAASX,GAAGP,UAChBa,EAAIK,EAASX,GAAGlB,YAClBsB,EAAQY,EAAiBX,QAAQM,EAASX,MAGxCI,EAAQ,EAAI,MAIZY,EAAiBZ,EAAQ,GAAG3B,UAAUC,SAAS,SAC7CsC,EAAiBZ,EAAQ,GAAG3B,UAAUC,SACzB4B,eAAAA,OAAAA,MAPR,CAWPU,GAAAA,EAAiBZ,EAAQ,GAAG3B,UAAUC,SACzB4B,eAAAA,OAAAA,IAAM,CACrBU,EAAiBZ,EAAQ,GAAGX,UACT,eAAA,OAAK,GAAJa,EADpB,oBAEAU,EAAiBZ,EAAQ,GAAGtB,YAAiBwB,GAAAA,OAAI,EAAJA,GAC7CO,IAAQG,EAAiBZ,EAAQ,GAAGtB,YACpCkC,EAAiBZ,GAAOX,UAAY,aACpCuB,EAAiBZ,GAAOtB,YAAc,GACtC8B,IAEgD,SAA5CI,EAAiBZ,EAAQ,GAAGtB,aAC9Bc,IAGF,MAGFoB,EAAiBZ,EAAQ,GAAGX,UAAYD,EACxCwB,EAAiBZ,EAAQ,GAAGtB,YAAcwB,EAC1CU,EAAiBZ,GAAOX,UAAY,aACpCuB,EAAiBZ,GAAOtB,YAAc,GACtCsB,IACAQ,KAIAA,EAAQ,GACVxC,IAGFJ,EAAMc,YAAiB,GAAA,QAACd,EAAMc,YAAc+B,KAIhDhD,EAAYqB,iBAAiB,QAASD","file":"main.1f6c1bee.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nconst allTr = [...document.querySelectorAll('tr')];\r\nconst allTdFromPage = [...document.querySelectorAll('td')];\r\nconst startButton = document.querySelector('.start');\r\nconst table = document.querySelector('.game-field');\r\nconst score = document.querySelector('.game-score');\r\n\r\nconst random = function() {\r\n  const a = Math.random();\r\n  let res;\r\n\r\n  if (a < 0.9) {\r\n    res = 2;\r\n  } else {\r\n    res = 4;\r\n  }\r\n\r\n  return res;\r\n};\r\n\r\nconst creator = function() {\r\n  const content = random();\r\n\r\n  const needTr = allTr[Math.floor(Math.random() * 4)];\r\n  const allTd = [...needTr.querySelectorAll('td')];\r\n  const needTd = allTd[Math.floor(Math.random() * 4)];\r\n\r\n  if (needTd.classList.contains('play')) {\r\n    return creator();\r\n  }\r\n\r\n  table.style.display = 'block';\r\n\r\n  needTd.classList.add('play');\r\n  needTd.classList.add(`field-cell--${content}`);\r\n  needTd.textContent = content;\r\n\r\n  if (loseMoment()) {\r\n    lose();\r\n  }\r\n};\r\n\r\nconst start = function() {\r\n  document.addEventListener('keyup', moveToLeft);\r\n  document.addEventListener('keyup', moveToRight);\r\n  document.addEventListener('keyup', moveToUp);\r\n  document.addEventListener('keyup', moveToDown);\r\n\r\n  score.textContent = '0';\r\n\r\n  allTdFromPage.forEach(a => {\r\n    a.className = 'field-cell';\r\n  });\r\n\r\n  allTdFromPage.forEach(a => {\r\n    a.textContent = '';\r\n  });\r\n\r\n  document.querySelector('.message').textContent = 'Press \"Restart\" to reload.';\r\n  document.querySelector('.message').classList.remove('message-lose');\r\n  document.querySelector('.message').classList.remove('message-win');\r\n  startButton.textContent = 'Restart';\r\n  startButton.classList.add('restart');\r\n  startButton.style.fontSize = '15px';\r\n  creator();\r\n  creator();\r\n};\r\n\r\nconst finish = function() {\r\n  document.querySelector('.message').textContent\r\n    = 'You are winner! Press \"Start\" to reload.';\r\n\r\n  document.querySelector('.message').classList.add('message-win');\r\n  startButton.textContent = 'Start';\r\n  startButton.style.fontSize = '16px';\r\n  startButton.className = 'button start';\r\n  document.removeEventListener('keyup', moveToLeft);\r\n  document.removeEventListener('keyup', moveToRight);\r\n  document.removeEventListener('keyup', moveToUp);\r\n  document.removeEventListener('keyup', moveToDown);\r\n};\r\n\r\nconst lose = function() {\r\n  document.querySelector('.message').textContent\r\n    = 'You lose! Press \"Start\" to reload.';\r\n  document.querySelector('.message').classList.add('message-lose');\r\n  startButton.textContent = 'Start';\r\n  startButton.style.fontSize = '16px';\r\n  startButton.className = 'button start';\r\n  document.removeEventListener('keyup', moveToLeft);\r\n  document.removeEventListener('keyup', moveToRight);\r\n  document.removeEventListener('keyup', moveToUp);\r\n  document.removeEventListener('keyup', moveToDown);\r\n};\r\n\r\nconst loseMoment = function() {\r\n  const allPlayTd = [...document.querySelectorAll('.play')];\r\n\r\n  if (allPlayTd.length < 16) {\r\n    return false;\r\n  }\r\n\r\n  for (let i = 0; i < allTdFromPage.length; i++) {\r\n    const needTr = allTdFromPage[i].closest('Tr');\r\n    const tdOnNeedTr = [...needTr.children];\r\n    const index = tdOnNeedTr.indexOf(allTdFromPage[i]);\r\n    let a = '';\r\n    let b = '';\r\n    let c = '';\r\n    let d = '';\r\n\r\n    if (tdOnNeedTr[index + 1]) {\r\n      a = tdOnNeedTr[index + 1].textContent;\r\n    }\r\n\r\n    if (allTdFromPage[i + 4]) {\r\n      b = allTdFromPage[i + 4].textContent;\r\n    }\r\n\r\n    if (tdOnNeedTr[index - 1]) {\r\n      c = tdOnNeedTr[index - 1].textContent;\r\n    }\r\n\r\n    if (allTdFromPage[i - 4]) {\r\n      d = allTdFromPage[i - 4].textContent;\r\n    }\r\n\r\n    if (allTdFromPage[i].textContent === a) {\r\n      return false;\r\n    }\r\n\r\n    if (allTdFromPage[i].textContent === b) {\r\n      return false;\r\n    }\r\n\r\n    if (allTdFromPage[i].textContent === c) {\r\n      return false;\r\n    }\r\n\r\n    if (allTdFromPage[i].textContent === d) {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  return true;\r\n};\r\n\r\nconst moveToLeft = function(e) {\r\n  if (e.key === 'ArrowLeft' || e.key === 'a') {\r\n    const movingTd = [...document.querySelectorAll('.play')];\r\n    let count = 0;\r\n    let sum = 0;\r\n\r\n    for (let i = 0; i < movingTd.length; i++) {\r\n      const array = [...movingTd[i].closest('tr').children];\r\n      let index = array.indexOf(movingTd[i]);\r\n      const a = movingTd[i].className;\r\n      const b = movingTd[i].textContent;\r\n\r\n      while (true) {\r\n        if (index - 1 < 0) {\r\n          break;\r\n        }\r\n\r\n        if (array[index - 1].classList.contains('play')\r\n          && !array[index - 1].classList.contains(`field-cell--${b}`)) {\r\n          break;\r\n        }\r\n\r\n        if (array[index - 1].classList.contains(`field-cell--${b}`)) {\r\n          array[index - 1].className = `field-cell--${+b * 2} play field-cell`;\r\n          array[index - 1].textContent = `${b * 2}`;\r\n          sum += +array[index - 1].textContent;\r\n          array[index].className = 'field-cell';\r\n          array[index].textContent = '';\r\n          count++;\r\n\r\n          if (array[index - 1].textContent === '2048') {\r\n            finish();\r\n          }\r\n\r\n          break;\r\n        }\r\n        array[index - 1].className = a;\r\n        array[index - 1].textContent = b;\r\n        array[index].className = 'field-cell';\r\n        array[index].textContent = '';\r\n        index--;\r\n        count++;\r\n      }\r\n    }\r\n\r\n    if (count > 0) {\r\n      creator();\r\n    }\r\n\r\n    score.textContent = `${+score.textContent + sum}`;\r\n  }\r\n};\r\n\r\nconst moveToRight = function(e) {\r\n  if (e.key === 'ArrowRight' || e.key === 'd') {\r\n    const movingTd = [...document.querySelectorAll('.play')];\r\n    let count = 0;\r\n    let sum = 0;\r\n\r\n    for (let i = movingTd.length - 1; i >= 0; i--) {\r\n      const array = [...movingTd[i].closest('tr').children];\r\n      let index = array.indexOf(movingTd[i]);\r\n      const a = movingTd[i].className;\r\n      const b = movingTd[i].textContent;\r\n\r\n      while (true) {\r\n        if (index + 1 > 3) {\r\n          break;\r\n        }\r\n\r\n        if (array[index + 1].classList.contains('play')\r\n          && !array[index + 1].classList.contains(`field-cell--${b}`)) {\r\n          break;\r\n        }\r\n\r\n        if (array[index + 1].classList.contains(`field-cell--${b}`)) {\r\n          array[index + 1].className = `field-cell--${+b * 2} play field-cell`;\r\n          array[index + 1].textContent = `${b * 2}`;\r\n          sum += +array[index + 1].textContent;\r\n          array[index].className = 'field-cell';\r\n          array[index].textContent = '';\r\n          count++;\r\n\r\n          if (array[index + 1].textContent === '2048') {\r\n            finish();\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n        array[index + 1].className = a;\r\n        array[index + 1].textContent = b;\r\n        array[index].className = 'field-cell';\r\n        array[index].textContent = '';\r\n        index++;\r\n        count++;\r\n      }\r\n    }\r\n\r\n    if (count > 0) {\r\n      creator();\r\n    }\r\n\r\n    score.textContent = `${+score.textContent + sum}`;\r\n  }\r\n};\r\n\r\nconst moveToUp = function(e) {\r\n  if (e.key === 'ArrowUp' || e.key === 'w') {\r\n    const movingTd = [...document.querySelectorAll('.play')];\r\n    let count = 0;\r\n    let sum = 0;\r\n\r\n    for (let i = 0; i < movingTd.length; i++) {\r\n      const array = [...movingTd[i].closest('tr').children];\r\n      const indexFirst = array.indexOf(movingTd[i]);\r\n      const arrayForFunction = [];\r\n\r\n      for (let n = 0; n < 4; n++) {\r\n        arrayForFunction.push(allTr[n].children[indexFirst]);\r\n      }\r\n\r\n      const a = movingTd[i].className;\r\n      const b = movingTd[i].textContent;\r\n      let index = arrayForFunction.indexOf(movingTd[i]);\r\n\r\n      while (true) {\r\n        if (index - 1 < 0) {\r\n          break;\r\n        }\r\n\r\n        if (arrayForFunction[index - 1].classList.contains('play')\r\n          && !arrayForFunction[index - 1].classList.contains(\r\n            `field-cell--${b}`)) {\r\n          break;\r\n        }\r\n\r\n        if (arrayForFunction[index - 1].classList.contains(\r\n          `field-cell--${b}`)) {\r\n          arrayForFunction[index - 1].className\r\n            = `field-cell--${+b * 2} play field-cell`;\r\n          arrayForFunction[index - 1].textContent = `${b * 2}`;\r\n          sum += +arrayForFunction[index - 1].textContent;\r\n          arrayForFunction[index].className = 'field-cell';\r\n          arrayForFunction[index].textContent = '';\r\n          count++;\r\n\r\n          if (arrayForFunction[index - 1].textContent === '2048') {\r\n            finish();\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n        arrayForFunction[index - 1].className = a;\r\n        arrayForFunction[index - 1].textContent = b;\r\n        arrayForFunction[index].className = 'field-cell';\r\n        arrayForFunction[index].textContent = '';\r\n        index--;\r\n        count++;\r\n      }\r\n    }\r\n\r\n    if (count > 0) {\r\n      creator();\r\n    }\r\n\r\n    score.textContent = `${+score.textContent + sum}`;\r\n  }\r\n};\r\n\r\nconst moveToDown = function(e) {\r\n  if (e.key === 'ArrowDown' || e.key === 's') {\r\n    const movingTd = [...document.querySelectorAll('.play')];\r\n    let count = 0;\r\n    let sum = 0;\r\n\r\n    for (let i = movingTd.length - 1; i >= 0; i--) {\r\n      const array = [...movingTd[i].closest('tr').children];\r\n      const indexFirst = array.indexOf(movingTd[i]);\r\n      const arrayForFunction = [];\r\n\r\n      for (let n = 0; n < 4; n++) {\r\n        arrayForFunction.push(allTr[n].children[indexFirst]);\r\n      }\r\n\r\n      const a = movingTd[i].className;\r\n      const b = movingTd[i].textContent;\r\n      let index = arrayForFunction.indexOf(movingTd[i]);\r\n\r\n      while (true) {\r\n        if (index + 1 > 3) {\r\n          break;\r\n        }\r\n\r\n        if (arrayForFunction[index + 1].classList.contains('play')\r\n          && !arrayForFunction[index + 1].classList.contains(\r\n            `field-cell--${b}`)) {\r\n          break;\r\n        }\r\n\r\n        if (arrayForFunction[index + 1].classList.contains(\r\n          `field-cell--${b}`)) {\r\n          arrayForFunction[index + 1].className\r\n            = `field-cell--${+b * 2} play field-cell`;\r\n          arrayForFunction[index + 1].textContent = `${b * 2}`;\r\n          sum += +arrayForFunction[index + 1].textContent;\r\n          arrayForFunction[index].className = 'field-cell';\r\n          arrayForFunction[index].textContent = '';\r\n          count++;\r\n\r\n          if (arrayForFunction[index + 1].textContent === '2048') {\r\n            finish();\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n        arrayForFunction[index + 1].className = a;\r\n        arrayForFunction[index + 1].textContent = b;\r\n        arrayForFunction[index].className = 'field-cell';\r\n        arrayForFunction[index].textContent = '';\r\n        index++;\r\n        count++;\r\n      }\r\n    }\r\n\r\n    if (count > 0) {\r\n      creator();\r\n    }\r\n\r\n    score.textContent = `${+score.textContent + sum}`;\r\n  }\r\n};\r\n\r\nstartButton.addEventListener('click', start);\r\n"]}